#Mysql开发约束规范

## 说明
mysql数据库操作处于业务开发的最低层，数据库的设计某种程度上决定了应用程序的部分逻辑，在数据库设计时应根据自身业务逻辑使用数据库设计范式和反范式结合的方式慎重设计，充分考虑到范式设计带来的连表查询和反范式冗余字段的同步问题以及字段预留。建议模块化开发方式下，由个人开发者设计最初版本后，由所有团队开发者讨论设计的合理可行性，修订字段名称和属性相关细节，决定出最终的方案，做到开发者对业务数据的认知，更好的让每一个开发者对整个项目的一个熟悉了解，如开发过程中发现表设计有不妥之处，应团队商讨做到众所周知，避免引起应用错误! 
</p>

## 规范
 * 命名
  * 命名应做到单词全拼命名见名知义
  * 数据库名称应是大概念名称，并使用小写英语名词下划线方式命名，如galaxy表名应是galaxy_crm
  * 表命名统一表简短前缀单数加名词英语下划线命名方式,如gi_visited_record 命名浏览记录表，record用单数不要加s
  * 字段同样是名称下划线方式，类似user_id的不能简写uid或者userid，做到一个单词一个下划线
  * 时间相关字段后缀_time,如create_time
  类型字段用_type，状态字段用_status后缀
  * 数据表、数据字段必须加入中文注释
  * 禁用保留字，否则会报错 如 desc、range、match、delayed 等
 * 引擎和字符集
    统一使用Innodb，utf-8
 * 表设计
   *  表必须有自增主键
   *  禁止使用外键
 * 字段设计
    * 使用整数存储时间,货币，格式在应用程序中处理，整型不要加约束位数，如int 而不是int(11)
    * 固定字符数的字段应该用char 而非varchar
    * varchar(20)存储手机号，包含国际号码
    * 使用TINYINT代替枚举型字段，无符号可表示0-255个状态
    * 必须把字段定义为NOT NULL并且提供默认值
    * 禁止使用TEXT、BLOB类型
 * 索引
    * 命名非唯一索引名idx_field1_field2，唯一索引名uniq_field1_field2,字段名可适当简写
    * 禁止在更新十分频繁、区分度不高的属性上建立索引
    * 建立组合索引，必须把区分度高的字段放在前面
    * 单表索引建议控制在5个以内
    * 根据Sql语句结合最左原则建立多列索引
    * 注意用不到索引的情况，如like，隐式转换，表达式等
 * SQL语句
   * 禁止使用SELECT，只获取必要的字段，需要显示说明列属性
   * 禁止使用属性隐式转换 解读：SELECT uid FROM t_user WHERE phone=13812345678 会导致全表扫描
   * 禁止使用INSERT INTO t_xxx VALUES(xxx)
   * 禁止在WHERE条件的属性上使用函数或者表达式
   * 禁止大表使用JOIN查询
   * 禁止使用OR条件，必须改为IN查询
   * 应用程序必须捕获SQL异常，并有相应处理
 * 其他规范


## 参考
   [58mysql军规](https://www.jianshu.com/p/c2bbc74b2b48)